<!doctype html>
<html lang="en">
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>


<!-- source: https://www.cdc.gov/nchs/data/hestat/obesity_adult_07_08/obesity_adult_07_08.pdf -->

<style>
    a.button1:link,
    a.button1.visited {
        width: 100px;
        height: 15px;
        background-color: #003459;
        text-align: center;
        padding: 10px 15px;
    }

    a.button2:link,
    a.button2.active {
        width: 100px;
        height: 15px;
        background-color: #00A7E1;
        text-align: center;
        padding: 10px 15px;
    }


    .columns {
        display: flex;
        flex-direction: row;
    }

    .button1 {
        color: white;
        margin-top: 15px;
    }
    .button2 {
        color: white;
        margin-top: 15px;
    }
    button {
        padding: 10px;
        background-color: #003459;
        width: 150px;
        color: white;
    }

    .box {
        padding: 10px;
        font: 13px sans-serif;

    }
    body {
        font: 13px sans-serif;
    }
</style>
<!-- <style>
	a:active {
	  color: yellow;
	  background-color: transparent;
	  text-decoration: underline;
	}
	    a:link, a:visited {
	  background-color: #f44336;
	  color: white;
	  padding: 15px 25px;
	  text-align: center;
	  text-decoration: none;
	  display: inline-block;
	}
	
	a:hover, a:active {
	  background-color: green;
	}
	</style> -->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous"> -->

    <title>Narrative Visualization</title>

</head>
<div class="box">
    <h1>Adult Obesity in America</h1>
        <h3>Obesity is one of the biggest health concerns in communities across the country. Obesity rates vary state-to-state, but remain high nationwide. 
                Across the United States, more than one in three adults are obese. Individuals who are obese are at 
                increased risk for type 2 diabetes, heart disease, some forms of cancer, dementia and a number of other health concerns.
                Factors that may contribute to weight gain among adults and youth include genes, eating habits, physical inactivity,medical conditions or medications, 
                and where and how people live, including their access to healthy foods and safe places to be active.</h3>
            <p>
                    Visualization: Age-adjusted prevalence of overweight, obesity, and extreme obesity
            among U.S. adults aged 20-74. Pregnant females were excluded from the analysis.
            <li>Click the buttons below to change the weight category</li>
    </p>
</div>
<div class="box">
        
        <div class="columns">
                <button onclick="update(overweight)" style="margin-left: 50px">Overweight</button>
                <button onclick="update(obese)">Obese</button>
                <button onclick="update(extremelyObese)">Extremely Obese</button>
            </div>

    <div id="obesity"></div>

    
    <body>
            

        <script>
            var obese
                = [
                    { group: "1960-1962", value: 13.4 },
                    { group: "1971-1974", value: 14.5 },
                    { group: "1976-1980", value: 15.0 },
                    { group: "1988-1994", value: 23.2 },
                    { group: "1999-2000", value: 30.9 },
                    { group: "2001-2002", value: 31.3 },
                    { group: "2003-2004", value: 32.9 },
                    { group: "2005-2006", value: 35.1 },
                    { group: "2007-2008", value: 34.3 },
                ];

            var overweight = [
                { group: "1960-1962", value: 31.5 },
                { group: "1971-1974", value: 32.3 },
                { group: "1976-1980", value: 32.1 },
                { group: "1988-1994", value: 32.7 },
                { group: "1999-2000", value: 33.6 },
                { group: "2001-2002", value: 34.4 },
                { group: "2003-2004", value: 33.4 },
                { group: "2005-2006", value: 32.2 },
                { group: "2007-2008", value: 33.6 },
            ];

            var extremelyObese = [
                { group: "1960-1962", value: 0.9 },
                { group: "1971-1974", value: 1.3 },
                { group: "1976-1980", value: 1.4 },
                { group: "1988-1994", value: 3.0 },
                { group: "1999-2000", value: 5.0 },
                { group: "2001-2002", value: 5.4 },
                { group: "2003-2004", value: 5.1 },
                { group: "2005-2006", value: 6.2 },
                { group: "2007-2008", value: 6.0 },
            ];
            const annotations = [
                {
                    note: {
                        label: "annotaiton label",
                    },
                    className: "show-bg",
                    x: 300,
                    y: 200,
                    dy: -80,
                    dx: -100

                }
            ]
            // const annotate = d3.annotation().labelAnnotations(labelAnnotations)
            const makeAnnotations = d3.annotation()
                //also can set and override in the note.padding property
                //of the annotation object
                .notePadding(15)
                .type(d3.annotationCalloutElbow)
                //   .type(type)
                //accessors & accessorsInverse not needed
                //   //if using x, y in annotations JSON
                //   .accessors({
                //     x: d => x(parseTime(d.date)),
                //     y: d => y(d.close)
                //   })
                //   .accessorsInverse({
                //      date: d => timeFormat(x.invert(d.x)),
                //      close: d => y.invert(d.y)
                //   })
                .annotations(annotations)


            var margin = { top: 30, right: 30, bottom: 70, left: 60 },
                width = 700 - margin.left - margin.right,
                height = 500 - margin.left - margin.right;

            var svg = d3.select("#obesity")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                // .attr("class", "annotation-group")
                // .call(makeAnnotations)
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
                // .attr("transform",
                //     "translate(" + margin.left + "," + margin.top + ")");
            var x = d3.scaleBand()
                .range([0, width])
                .domain(obese
                    .map(function (d) { return d.group; }))
                .padding(0.2);
            svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                
                .call(d3.axisBottom(x));
                svg.append("text")             
      .attr("transform",
            "translate(" + (width/2) + " ," + 
                           (height + margin.top + 20) + ")")
      .style("text-anchor", "middle")
      .text("Year of Data Collection");
            var y = d3.scaleLinear()
                .domain([0, 40])
                .range([height, 0]);
            svg.append("g")
                .attr("class", "myYaxis")
                .call(d3.axisLeft(y));
                svg.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left)
      .attr("x",0 - (height / 2))
      .attr("dy", "1em")
      .style("text-anchor", "middle")
      .text("% of Population"); 

            function update(data) {
                var slice = svg.selectAll("rect")
                    .data(data)
                    // .attr("transform", function(d){return "translate("+ x(d.group) + ",0)";})
                    // .attr("transform", function (d) { return "translate(0,0)"; });

                slice
                    .enter()
                    .append("rect")
                    .merge(slice)
                    .style("opacity", "0")
                    // .transition()
                    // .duration(1020)
                    .attr("x", function(d) {return x(d.group);})
                    .attr("y", function(d) {return y(d.value);})
                    .attr("width", x.bandwidth())
                    .attr("height", function(d) {return height-y(d.value);})
                    .attr("fill", "#6874E8")
                    .transition().delay(function (d, i) { return 100 + 100 * i; }).style("opacity", "1");

                    // .delay(function (d) { return Math.random() * 1000; })
                    // .attr("y", function(d) { return y(d.percent); })
                    // .attr("height", function(d) { return height - y(d.percent); });
                    // .attr("width", function(d){return x(d.group)})
                    // .attr("width", 60)

                    // .attr("x", function (d) { return x(d.group) })
                    // .attr("fill", "green")

                    // .attr("y", function (d) { return y(d.value); })
                    // .attr("height", function (d) { return height - y(d.value); });

                // .attr("width", x.bandwidth())
                // .attr("height", function (d) { return height - y(d.value); })
                // .attr("fill", "#69b3a2")

                //               slice.selectAll("rect")
                //   .transition()
                //   .delay(function (d) {return Math.random()*1000;})
                //   .duration(1000)
                //   .attr("y", function(d) { return y(d.percent); })
                //   .attr("height", function(d) { return height - y(d.percent); });
            }
            // Initialize the plot with the first dataset
            update(obese);
        // d3.select("#obesity").appen/d("g").call(annotate)

        </script>
        
</div>
<!-- <center> -->
<a class="button1" href="index.html" style="margin-left: 70px">Page 1</a>
<a class="button2" href="chart2.html">Page 2</a>
<a class="button2" href="chart3.html">Page 3</a>
<!-- </center> -->
</body>

</html>

<!-- <html lang='en'>

<head>
    <meta charset='utf-8'>
    <link rel="stylesheet" href="./css/bootstrap.css">
    <script src='https://d3js.org/d3.v5.js'></script>
    <script src='./scripts/scripts.js'></script>
    <title>Narrative Visualization</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src='https://d3js.org/d3.v5.js' charset='utf-8'></script>
</head>

<body>
    <div class="card">
        <p>testing boostrap</p>
    </div>

    <script src="index.js">
  </script>

</body>

</html> -->